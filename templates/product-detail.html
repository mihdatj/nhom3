<!DOCTYPE html>
<html lang="vi">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Tiết Sản Phẩm - Nhóm 3</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .product-detail-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .breadcrumb {
            margin-bottom: 20px;
            font-size: 14px;
            color: #666;
        }
        .breadcrumb a {
            color: #2d5016;
            text-decoration: none;
        }
        .product-detail-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        .product-images {
            position: sticky;
            top: 100px;
        }
        .product-main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e5e5e5;
        }
        .product-info h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
        }
        .product-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .product-price-section {
            background-color: #f8f9f5;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .product-price {
            font-size: 32px;
            color: #2d5016;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .product-original-price {
            color: #999;
            text-decoration: line-through;
            font-size: 18px;
            margin-bottom: 10px;
        }
        .product-discount-badge {
            background-color: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .product-variants {
            margin-bottom: 20px;
        }
        .variant-group {
            margin-bottom: 15px;
        }
        .variant-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        .variant-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .variant-option {
            padding: 10px 20px;
            border: 2px solid #d0d0d0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #f5f5f5;
            color: #666;
            font-size: 14px;
            min-width: 120px;
            text-align: center;
        }
        .variant-option:hover {
            border-color: #2d5016;
            background-color: #f0f5ed;
        }
        .variant-option.selected {
            border-color: #2d5016;
            background-color: #e8f5e3;
            color: #333;
            font-weight: 500;
        }
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .quantity-input {
            display: flex;
            align-items: center;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
        }
        .quantity-btn {
            width: 40px;
            height: 40px;
            border: none;
            background-color: #f5f5f5;
            cursor: pointer;
            font-size: 18px;
        }
        .quantity-btn:hover {
            background-color: #e5e5e5;
        }
        .quantity-value {
            width: 60px;
            text-align: center;
            border: none;
            padding: 10px;
            font-size: 16px;
        }
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        .add-to-cart-btn {
            flex: 1;
            padding: 15px;
            background-color: #2d5016;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .add-to-cart-btn:hover {
            background-color: #1a3009;
        }
        .btn-buy-now {
            flex: 1;
            padding: 15px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        .product-description {
            margin-top: 40px;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
        }
        .product-description h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2d5016;
        }
        .description-content {
            line-height: 1.8;
            color: #666;
        }
        .description-content h3 {
            color: #333;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .description-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .description-content li {
            margin-bottom: 8px;
        }
        @media (max-width: 768px) {
            .product-detail-wrapper {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="header-top-content">
                    <div class="header-top-left">
                        <span><i class="fas fa-truck"></i> Freeship nội thành Hà Nội & Hồ Chí Minh đơn hàng 299.000₫</span>
                        <span><i class="fas fa-shipping-fast"></i> FreeShip toàn quốc đơn hàng 399K</span>
                    </div>
                    <div class="header-top-right">
                        <span><i class="fas fa-phone"></i> Hotline: 123456</span>
                        <a href="{% url 'cart' %}" style="cursor: pointer; text-decoration: none; color: inherit;"><i class="fas fa-shopping-cart"></i> Giỏ hàng</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-main">
            <div class="container">
                <div class="header-main-content">
                    <a href="{% url 'index' %}" style="text-decoration: none; color: inherit;">
                        <div class="logo">
                            <h1>Nhóm 3</h1>
                        </div>
                    </a>
                    <div class="search-bar">
                        <input type="text" placeholder="Nhập ít nhất 3 ký tự để tìm kiếm">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="header-actions">
                        <a href="{% url 'cart' %}" style="text-decoration: none; color: inherit;">
                            <div class="cart-icon">
                                <i class="fas fa-shopping-cart"></i>
                                <span class="cart-count">0</span>
                            </div>
                        </a>
                        <button class="login-btn">Đăng Nhập</button>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navbar">
            <div class="container">
                <ul class="nav-menu">
                    <li><a href="{% url 'index' %}"><i class="fas fa-home"></i> Trang Chủ</a></li>
                    <li><a href="#"><i class="fas fa-shopping-basket"></i> Rau củ quả</a></li>
                    <li><a href="#"><i class="fas fa-phone"></i> Liên Hệ</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="product-detail-container">
            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <a href="{% url 'index' %}">Trang chủ</a> / <span id="breadcrumbCategory">Sản phẩm</span> / <span id="breadcrumbProduct">Chi tiết</span>
            </div>

            <!-- Product Detail -->
            <div class="product-detail-wrapper">
                <div class="product-images">
                    <img id="productMainImage" src="" alt="Product" class="product-main-image">
                </div>
                <div class="product-info">
                    <h1 id="productName"></h1>
                    <div class="product-rating">
                        <div class="stars">★★★★★</div>
                        <span>(15 đánh giá)</span>
                        <span id="productSold">134 đã bán</span>
                    </div>
                    <div class="product-price-section">
                        <div class="product-price" id="productPrice"></div>
                        <div class="product-original-price" id="productOriginalPrice"></div>
                        <div class="product-discount-badge" id="productDiscount"></div>
                        <p style="color: #2d5016; margin-top: 10px;"><i class="fas fa-truck"></i> Khuyến mãi: Miễn phí giao hàng</p>
                    </div>
                    <div class="product-variants">
                        <div class="variant-group">
                            <label><strong>Khu vực</strong></label>
                            <div class="variant-options" id="regionOptions">
                                <div class="variant-option selected" onclick="selectRegion(this, 'Hà Nội')">Hà Nội</div>
                                <div class="variant-option" onclick="selectRegion(this, 'Hồ Chí Minh')">Hồ Chí Minh</div>
                            </div>
                        </div>
                        <div class="variant-group">
                            <label><strong>Loại</strong></label>
                            <div class="variant-options" id="productVariants">
                                <!-- Variants will be loaded by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="quantity-selector">
                        <label>Số lượng:</label>
                        <div class="quantity-input">
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" id="productQuantity" class="quantity-value" value="1" min="1">
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="add-to-cart-btn" onclick="addToCartFromDetail()">
                            Thêm Vào Giỏ
                        </button>
                        <button class="btn-buy-now" onclick="buyNow()">Mua ngay</button>
                    </div>
                </div>
            </div>

            <!-- Product Description -->
            <div class="product-description">
                <h2>Mô tả</h2>
                <div class="description-content" id="productDescription">
                    <!-- Description will be loaded by JavaScript -->
                </div>
            </div>

            <!-- Categories Section -->
            <section class="categories-section" style="margin-top: 40px;">
                <h2>Danh Mục Sản Phẩm</h2>
                <div class="categories-grid">
                    <div class="category-item" onclick="goToCategory('Rau Củ Quả Tươi')">
                        <div class="category-icon"><i class="fas fa-carrot"></i></div>
                        <span>Rau Củ Quả Tươi</span>
                    </div>
                    <div class="category-item" onclick="goToCategory('Rau Ăn Lá')">
                        <div class="category-icon"><i class="fas fa-seedling"></i></div>
                        <span>Rau Ăn Lá</span>
                    </div>
                    <div class="category-item" onclick="goToCategory('Rau Gia Vị')">
                        <div class="category-icon"><i class="fas fa-pepper-hot"></i></div>
                        <span>Rau Gia Vị</span>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>HỖ TRỢ KHÁCH HÀNG</h3>
                    <ul>
                        <li><a href="#">Các câu hỏi thường gặp</a></li>
                        <li><a href="#">Hướng dẫn đặt hàng và thanh toán</a></li>
                        <li><a href="#">Chính sách giao hàng</a></li>
                        <li><a href="#">Chính sách đổi trả</a></li>
                        <li><a href="#">Thanh toán</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>VỀ CHÚNG TÔI</h3>
                    <ul>
                        <li><a href="#">Giới thiệu</a></li>
                        <li><a href="#">Liên hệ</a></li>
                        <li><a href="#">Danh sách cửa hàng</a></li>
                        <li><a href="#">Chính sách bảo mật</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>TỔNG ĐÀI CHĂM SÓC KHÁCH HÀNG</h3>
                    <div class="contact-info">
                        <p><strong>Hotline:</strong> <a href="tel:123456">123456</a></p>
                        <p><strong>Phòng CSKH:</strong> 123456</p>
                        <p><strong>Phòng mua hàng:</strong> 123456</p>
                        <p><strong>Phòng kế toán:</strong> 123456</p>
                        <p><strong>Phòng HCNS:</strong> 123456</p>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>ĐỊA CHỈ CÁC TRỤ SỞ</h3>
                    <div class="address-info">
                        <p><strong>Trụ Sở Chính Hà Nội:</strong><br>
                        Số 11 Kim Đồng | Phường Giáp Bát | Quận Hoàng Mai | Hà Nội</p>
                        <p><strong>Chi Nhánh TP.HCM:</strong><br>
                        Số 02/B Khu Phố 3 | Đường Trung Mỹ Tây 13 | Quận 12 | TP.HCM</p>
                        <p><strong>Xưởng Chế Biến:</strong><br>
                        Vạn Ty | Thái Bảo | Gia Bình | Bắc Ninh</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/script.js' %}"></script>
    <script src="{% static 'js/product-detail.js' %}"></script>
    <script>
        // Update image paths in products data to use static files
        if (typeof products !== 'undefined' && Array.isArray(products)) {
            products.forEach(function(product) {
                if (product.image && product.image.startsWith('img/')) {
                    product.image = '/static/images/img/' + product.image.substring(4);
                } else if (product.image && !product.image.startsWith('/static/') && !product.image.startsWith('http')) {
                    product.image = '/static/images/' + product.image;
                }
            });
        }
    </script>
</body>
</html>
